# Домашнее задание к занятию «Компоненты Kubernetes»

## Задание. Необходимо определить требуемые ресурсы
Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:

1. Необходимо упаковать приложение в чарт для деплоя в разные окружения. 
2. База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии. 
3. Кеш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии. 
4. Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий. 
5. Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.

## Решение

1. База данных

- CPU: 3 * 1 = 3 ядра
- RAM: 3 * 4 ГБ = 12 ГБ

2. Кеш

- CPU: 3 * 1 = 3 ядра
- RAM: 3 * 4 ГБ = 12 ГБ

3. Фронтенд

- CPU: 5 * 0.2 = 1 ядро
- RAM: 5 * 50 МБ = 250 МБ

4. Бекенд

- CPU: 10 * 1 = 10 ядер
- RAM: 10 * 600 МБ = 6 ГБ

5. Общие ресурсы

Без запаса:

- CPU: 17 ядер
- RAM: 30.25 ГБ

С запасом (~30%): 

- CPU: 17 * 1.3 ≈ 22 ядра
- RAM: 30.25 * 1.3 ≈ 40 ГБ

Необходимо зарезервировать служебные ресурсы:

- CPU: 0.5–1 ядро на ноду
- RAM: 0.5–1 ГБ на ноду

6. Расчёт количества нод

Решила, что будет 4 ноды (8 CPU / 16 ГБ RAM)

- CPU: 4 * 8 = 32 (из них 4 на системные нужды, остальное 28)
- RAM: 4 * 16 = 64 ГБ (из них 4 ГБ на системные нужды, остальное 60)

Если откажет 1 нода: 

- CPU: 3 * 8 = 24 (из них 3 на системные нужды, остальное 21)
- RAM: 3 * 16 = 48 ГБ (из них 3 ГБ на системные нужды, остальное 45)

- CPU: 22 > 21
- RAM: 40 < 45

Получается, что при отказе одной ноды будет нехватка 1 ядра (с RAM проблем нет).
Если рассматривать другие варианты, то можно увеличить количесво ядер на нодах до 10 или использовать 5 нод в текущей конфигурации. Это дорого, выходит большой запас по ресурсам. Если приложение может временно работать с небольшой деградацией, то я бы оставила свой вариант с 4 нодами (8 CPU / 16 ГБ RAM).
