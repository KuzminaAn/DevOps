# Домашнее задание к занятию «Микросервисы: принципы»

Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры. Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

## Задача 1: API Gateway

Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

Решение должно соответствовать следующим требованиям:

- маршрутизация запросов к нужному сервису на основе конфигурации,
- возможность проверки аутентификационной информации в запросах,
- обеспечение терминации HTTPS.

### Решение

Сравнительная таблица возможностей различных программных решений для API Gateway:

| Функция | Kong | AWS API Gateway | Tyk Gateway |
| ------- | ------- | ------- | ------- |
| Маршрутизация | Да | Да | Да |
| Проверка аутентификации | Да | Да | Да |
| HTTPS терминация | Да | Да | Да |
| Открытый исходный код | Да | Нет | Да |

В данном случае я рекомендую использовать Kong Gateway. Несмотря на то, что все перечисленные решения справляются с поставленными задачами, Kong обладает рядом преимуществ:

- обширная библиотека плагинов

Это значительно упрощает интеграцию с другими сервисами и добавление новых функций.

- открытый исходный код

- высокая масштабируемость

Kong обеспечивает высокую производительность и может обрабатывать большое количество запросов, что критично для растущей системы.

Хотя AWS API Gateway является подходящим инструментом, его стоимость может быть существенно выше, особенно при росте нагрузки. Tyk – достойная альтернатива, но Kong в данном случае выглядит более привлекательным решением из-за более широкой экосистемы плагинов и открытого исходного кода.

## Задача 2: Брокер сообщений

Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

Решение должно соответствовать следующим требованиям:
- поддержка кластеризации для обеспечения надёжности,
- хранение сообщений на диске в процессе доставки,
- высокая скорость работы,
- поддержка различных форматов сообщений,
- разделение прав доступа к различным потокам сообщений,
- простота эксплуатации.

### Решение

Сравнительная таблица возможностей различных брокеров сообщений:

| Функция | Kafka | RabbitMQ | ActiveMQ | Pulsar |
| ------- | ------- | ------- | ------- | ------- |
| Кластеризация | Да | Да | Да | Да |
| Хранение на диске | Да | Да | Да | Да | 
| Скорость работы | Высокая | Высокая | Средняя | Очень высокая | 
| Поддержка различных форматов | Да | Да | Да | Да | 
| Разделение прав доступа | Да | Да | Да | Да |
| Простота эксплуатации | Средняя | Средняя | Средняя | Средняя |

В данном случае я рекомендую использовать Apache Kafka. Kafka обладает рядом важных преимуществ:

- высокая пропускная способность и скорость

Kafka специально разработан для обработки больших объемов данных с высокой скоростью. Это критично для систем с большим количеством микросервисов.

- масштабируемость и отказоустойчивость

Kafka легко масштабируется горизонтально, обеспечивая высокую доступность и отказоустойчивость.

- разделение потоков (топики)

Хорошо организованная система топиков обеспечивает эффективное разделение и маршрутизацию сообщений.

- функции потоковой обработки

Kafka предоставляет возможности для потоковой обработки данных, что может быть полезно в нашей архитектуре.

RabbitMQ и Pulsar - хорошие альтернативы, особенно если требуется более сложная маршрутизация сообщений или другие специфические функции. ActiveMQ уступает конкурентам в скорости работы.
